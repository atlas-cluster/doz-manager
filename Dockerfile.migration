FROM oven/bun:1.3-debian

WORKDIR /app

COPY package.json bun.lock* ./

# Install dependencies (including prisma CLI if it's in dependencies)
RUN bun install --frozen-lockfile

COPY prisma ./prisma
COPY prisma.config.ts ./

CMD ["bun", "x", "prisma", "migrate", "deploy"]
